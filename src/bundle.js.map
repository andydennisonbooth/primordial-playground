{"version":3,"sources":["webpack:///webpack/bootstrap e5a7325348c06dc17a9e","webpack:///./src/js/pair.js","webpack:///./src/js/entry.js","webpack:///./src/js/engine.js","webpack:///./src/js/engine_object.js","webpack:///./src/js/mouse_drag_object.js"],"names":["Pair","x","y","update","pair","other","map","dim","idx","Math","sqrt","delta","reduce","sum","val","document","addEventListener","engineObjects","Set","size","start","options","Object","assign","canvas","context","frameRate","backgroundColor","body","getElementsByTagName","createElement","appendChild","getContext","focus","engineActions","objectActions","forEach","engineObject","engine","push","width","innerWidth","height","innerHeight","fillStyle","fillRect","downkeys","add","event","keyCode","delete","handleMouseMove","clientX","clientY","mousePosition","mouseDelta","mouseDownPosition","eachDragObject","mdo","position","offset","removeEventListener","action","Array","from","filter","dragWithMouse","callback","mouseDragObjects","loop","setInterval","dispatchEngineActions","dispatchObjectActions","shift","unshift","speed","color","visible","registerEngineObject","unregisterEngineObject"],"mappings":"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","file":"./src/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e5a7325348c06dc17a9e","export default class Pair {\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n\n    this.update();\n  }\n\n  update() {\n    this.pair = [this.x, this.y];\n  }\n\n  delta(other) {\n    return new Pair(...this.pair.map((dim, idx) => other.pair[idx] - dim));\n  }\n\n  distance(other) {\n    return Math.sqrt(this.delta(other).pair.reduce((sum, val) => sum + val));\n  }\n\n  offset(other) {\n    return new Pair(...this.pair.map((dim, idx) => dim + other.pair[idx]));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/pair.js","import Pair from './pair';\nimport Engine from './engine';\nimport mouseDragObject from './mouse_drag_object';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new Engine({\n    engineObjects: new Set([\n      new mouseDragObject({ size: new Pair(30, 30) })\n    ])\n  }).start();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/entry.js","import Pair from './pair';\nimport EngineObject from './engine_object';\n\nexport default class {\n  constructor(options) {\n    this.options = Object.assign(this, {\n      canvas: null,\n      context: null,\n      engineObjects: new Set,\n      frameRate: 60,\n      backgroundColor: 'white'\n    }, options);\n\n    // Get body reference\n    this.body = document.getElementsByTagName('body')[0];\n\n    // Get or create canvas\n    if (!this.canvas) {\n      this.canvas = document.getElementsByTagName('canvas')[0];\n      if (!this.canvas) {\n        this.canvas = document.createElement('canvas');\n      }\n      this.body.appendChild(this.canvas);\n    }\n\n    // Create context\n    if (!this.context) {\n      this.context = this.canvas.getContext('2d');\n    }\n\n    // Set focus to canvas\n    this.canvas.focus();\n\n    // Set up engine and object actions\n    this.engineActions = [];\n    this.objectActions = ['update', 'draw'];\n\n    this.engineObjects.forEach(engineObject => { engineObject.engine = this; });\n\n    // Action for keeping track of viewport size\n    this.engineActions.push(() => {\n      this.width = innerWidth;\n      this.height = innerHeight;\n    });\n\n    // Action for updating canvas to fill viewport\n    this.engineActions.push(() => {\n      this.canvas.width = this.width;\n      this.canvas.height = this.height;\n    });\n\n    // Action for clearing background\n    this.engineActions.push(() => {\n      this.context.fillStyle = this.backgroundColor;\n      this.context.fillRect(0, 0, this.width, this.height);\n    });\n\n    // Set up key status tracking\n    this.downkeys = new Set;\n    this.body.addEventListener('keydown', event => {\n      this.downkeys.add(event.keyCode);\n    });\n    this.body.addEventListener('keyup', event => {\n      this.downkeys.delete(event.keyCode);\n    });\n\n    // Set up mouse status tracking\n    const handleMouseMove = ({ clientX, clientY }) => {\n      this.mousePosition = new Pair(clientX, clientY);\n      const mouseDelta = this.mouseDownPosition.delta(this.mousePosition);\n      this.eachDragObject(mdo => {\n        mdo.position = mdo.mouseDownPosition.offset(mouseDelta);\n      });\n    };\n\n    this.body.addEventListener('mousedown', ({ clientX, clientY }) => {\n      this.body.addEventListener('mousemove', handleMouseMove);\n      this.mouseDownPosition = new Pair(clientX, clientY);\n      this.eachDragObject(mdo => {\n        mdo.mouseDownPosition = mdo.position;\n      });\n    });\n\n    this.body.addEventListener('mouseup', ({ clientX, clientY }) => {\n      this.body.removeEventListener('mousemove', handleMouseMove);\n      this.mouseDownPosition = new Pair(clientX, clientY);\n      this.mouseDelta = new Pair;\n    });\n  }\n\n  registerEngineObject(engineObject) {\n    this.engineObjects.add(engineObject);\n  }\n\n  unregisterEngineObject(engineObject) {\n    this.engineObjects.delete(engineObject);\n  }\n\n  dispatchEngineActions() {\n    this.engineActions.forEach(action => action());\n  }\n\n  dispatchObjectActions() {\n    this.objectActions.forEach(action => {\n      this.engineObjects.forEach(engineObject => engineObject[action]());\n    });\n  }\n\n  mouseDragObjects() {\n    return Array.from(this.engineObjects).filter(engineObject => (\n      engineObject.dragWithMouse\n    ));\n  }\n\n  eachDragObject(callback) {\n    this.mouseDragObjects().forEach(mdo => callback(mdo));\n  }\n\n  start(frameRate) {\n    this.loop = setInterval(() => {\n      this.dispatchEngineActions();\n      this.dispatchObjectActions();\n    }, 1000 / (frameRate || this.frameRate));\n  }\n\n  pause() {\n    this.objectActions.shift();\n  }\n\n  unpause() {\n    this.objectActions.unshift('update');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/engine.js","import Pair from './pair';\n\nexport default class {\n  constructor(options) {\n    Object.assign(this, {\n      engine: null,\n      position: new Pair,\n      size: new Pair(1, 1),\n      speed: 0,\n      color: 'black',\n      visible: true,\n    }, options);\n  }\n\n  register(engine) {\n    (engine || this.engine).registerEngineObject(this);\n  }\n\n  unregister(engine) {\n    (engine || this.engine).unregisterEngineObject(this);\n  }\n\n  update() {\n    this.position.update();\n    this.size.update();\n  }\n\n  draw() {\n    if (!this.visible) return;\n\n    const context = this.engine.context;\n    context.fillStyle = this.color;\n    context.fillRect(...this.position.pair, ...this.size.pair);\n  }\n\n  move(offset) {\n    this.position = this.position.offset(offset);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/engine_object.js","import EngineObject from './engine_object';\nimport Pair from './pair';\n\nexport default class extends EngineObject {\n  constructor(options) {\n    super(Object.assign({\n      mouseDelta: new Pair,\n    }, options));\n\n    this.dragWithMouse = true;\n    this.mouseDownPosition = this.position;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/mouse_drag_object.js"],"sourceRoot":""}